{% extends "layout.html" %}
{% block content %}
<h1>Module {{ module.id }}: {{ module.title }}</h1>

<h4>{{ module.id }} / 5 </h4>

{% if module.example1_pic %}
  <img src="{{ module.example1_pic }}" alt="" style="width: 300px;">
{% endif %}

{% if module.example1_link %}
  <p>Example 1: <a href="{{ module.example1_link }}" target="_blank">{{ module.example1_description }}</a></p>
{% else %}
  <p>Example 1: {{ module.example1_description }}</p>
{% endif %}

{% if module.example2_pic %}
  <img src="{{ module.example2_pic }}" alt="" style="width: 300px;">
{% endif %}

{% if module.example2_link %}
  <p>Example 2: <a href="{{ module.example2_link }}" target="_blank">{{ module.example2_description }}</a></p>
{% else %}
  <p>Example 2: {{ module.example2_description }}</p>
{% endif %}

<p><strong>What to look for:</strong></p>
<ul>
  {% for tip in module.what_to_look_for %}
    <li>{{ tip }}</li>
  {% endfor %}
</ul>

<button id="back-button" data-back-id="{{ module.go_back }}">Back</button>
<button id="next-button" data-next-id="{{ module.next }}">Next</button>

<script src="{{ url_for('static', filename='routing.js') }}"></script>

<script>
let startTime = Date.now();

$(window).on('beforeunload', function () {
    let endTime = Date.now();
    let timeSpentSeconds = Math.floor((endTime - startTime) / 1000);

    navigator.sendBeacon('/record_time', JSON.stringify({
        module_id: "{{ module.id }}",
        time_spent: timeSpentSeconds
    }));
});
</script>
{% endblock %}
