{% extends "layout.html" %}
{% block content %}

<!-- Progress Indicator in Top-Right -->
<div style="position: absolute; top: 20px; right: 30px; font-weight: bold; font-size: 1.1rem; background: #f0f0f0; padding: 6px 12px; border-radius: 6px;">
  {{ step }} / 7
</div>

<h2 class="text-center mt-4">Question {{ step }}: Please choose the real image.</h2>

<form method="POST" id="quiz-form">
  <div class="d-flex justify-content-around mt-5">
    <label id="label-image1"
           class="image-choice"
           style="border: 2px solid #444; width: 45%; height: 300px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
      <input type="radio" name="answer" value="image1" required style="display: none;">
      Image 1 placeholder
    </label>

    <label id="label-image2"
           class="image-choice"
           style="border: 2px solid #444; width: 45%; height: 300px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
      <input type="radio" name="answer" value="image2" required style="display: none;">
      Image 2 placeholder
    </label>
  </div>

  <div class="d-flex justify-content-between mt-4">
    {% if step > 1 %}
      <a class="btn btn-secondary" href="{{ url_for('big_quiz', step=step - 1) }}">Back</a>
    {% else %}
      <span></span>
    {% endif %}
  
    {% if step < 7 %}
      <button type="submit" class="btn btn-primary">Next</button>
    {% endif %}
  </div>  
</form>

<!-- Score Display on Step 7 -->
{% if step == 7 and score is not none %}
  <div class="text-center mt-5">
    <h3>Quiz Complete!</h3>
    <p>You scored {{ score }} out of 7.</p>
  </div>
{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const correctAnswers = {
      1: "image2",
      2: "image1",
      3: "image2",
      4: "image1",
      5: "image2",
      6: "image1",
      7: "image2"
    };

    function clearBorders() {
      document.getElementById("label-image1").classList.remove("correct", "incorrect");
      document.getElementById("label-image2").classList.remove("correct", "incorrect");
    }

    document.querySelectorAll('input[name="answer"]').forEach(input => {
      input.addEventListener('change', function () {
        const selected = this.value;
        const step = {{ step }};
        const correct = correctAnswers[step];

        clearBorders();

        if (selected === correct) {
          document.getElementById("label-" + selected).classList.add("correct");
        } else {
          document.getElementById("label-" + selected).classList.add("incorrect");
          document.getElementById("label-" + correct).classList.add("correct");
        }
      });
    });
  });
</script>

{% endblock %}




